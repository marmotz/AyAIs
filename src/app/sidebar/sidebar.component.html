<div class="box-border flex h-screen w-22 flex-col bg-linear-to-r from-blue-50 to-blue-100 text-white">
  <div
    class="flex flex-col items-center rounded-b-xl border-blue-300 bg-radial from-blue-100 via-blue-100 to-blue-300 pb-2 shadow-lg"
  >
    <img
      src="assets/icons/png/64x64.png"
      alt="Logo"
      class="size-16"
    />
    <div
      class="w-full cursor-default text-center text-xl font-bold text-slate-600"
      id="logo"
    >
      AyAIs
    </div>
  </div>
  <nav class="flex flex-1 flex-col gap-3 p-3">
    @for (service of services; track service.name; let i = $index) {
      <button
        class="group relative size-16 cursor-pointer rounded-2xl border-none p-2 text-white transition-colors duration-200 hover:bg-slate-500/10 focus:outline-none"
        (click)="onServiceClick(service)"
        [title]="getServiceTitle(service, i)"
      >
        <img
          [src]="service.icon"
          [alt]="service.name"
          class="size-12 group-hover:opacity-100 group-hover:grayscale-0"
          [class.grayscale]="selectedService()?.name !== service.name"
          [class.opacity-50]="selectedService()?.name !== service.name"
        />
        @if (appConfig()?.shortcuts?.internalShortcuts?.services?.[service.name]) {
          <span class="absolute right-0 bottom-0 rounded bg-slate-600 px-1 text-xs text-white">
            {{ appConfig()?.shortcuts?.internalShortcuts?.services?.[service.name] }}
          </span>
        }
      </button>
    }

    @if (isAiServicesRoute() && selectedIndex() !== -1) {
      <div
        class="absolute h-16 w-1 translate-x-18 rounded bg-slate-500 text-sm whitespace-nowrap text-white transition-transform duration-500"
        [style]="{
          transform: `translateY(calc(var(--spacing) * 19 * ${selectedIndex()})`,
        }"
      ></div>
    }
  </nav>

  <div class="mb-3 flex w-full flex-col items-center gap-3">
    <button
      class="group relative size-12 cursor-pointer rounded-2xl border-none p-2 text-white transition-colors duration-200 hover:bg-slate-500/10 focus:outline-none"
      (click)="openWhatsNew()"
      title="What's new"
    >
      <img
        src="assets/icons/whatsnew.svg"
        alt="What's new"
        class="size-8 group-hover:opacity-100"
      />
    </button>

    <button
      class="group relative mt-auto size-12 cursor-pointer rounded-2xl border-none p-2 text-white transition-colors duration-200 hover:bg-slate-500/10 focus:outline-none"
      (click)="isAiServicesRoute() ? openSettings() : openAiServices()"
      [title]="getSettingsTitle()"
    >
      <img
        src="assets/icons/settings.svg"
        alt="Settings"
        class="size-8 group-hover:opacity-100"
      />
    </button>

    <button
      class="group relative size-12 cursor-pointer rounded-2xl border-none p-2 text-white transition-colors duration-200 hover:bg-slate-500/10 focus:outline-none"
      (click)="quitApp()"
      [title]="getQuitTitle()"
    >
      <img
        src="assets/icons/exit.svg"
        alt="Quit"
        class="size-8 group-hover:opacity-100"
      />
    </button>

    @if (isSettingsRoute()) {
      <div
        class="absolute h-10 w-1 translate-x-10 translate-y-1 rounded bg-slate-500 text-sm whitespace-nowrap text-white"
      ></div>
    }
  </div>

  <p-dialog
    [visible]="whatsNewVisible()"
    (visibleChange)="whatsNewVisible.set($event)"
    [modal]="true"
    [style]="{ width: '50vw' }"
  >
    <ng-template pTemplate="header">
      <h2 class="m-0 text-xl font-semibold">What's new</h2>
    </ng-template>
    <ng-template pTemplate="content">
      <p></p>
    </ng-template>
  </p-dialog>
</div>
